<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Simulador de alineamiento entre tu priorización temática y los planes de gobierno</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 1.5rem;
      background: #f5f5f5;
      color: #111;
    }
    h1, h2, h3 { margin-top: 0; }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: #fff;
      padding: 1.5rem 2rem 2rem;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
    }

    /* Intro alineada a la izquierda */
    .intro {
      font-size: 0.95rem;
      line-height: 1.55;
      text-align: left;
      max-width: none;
      margin: 0 0 1rem 0;
    }
    .intro strong { font-weight: 700; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
    }
    .card {
      background: #fafafa;
      border-radius: 12px;
      padding: 1rem 1.25rem;
      border: 1px solid #e1e1e1;
    }
    label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
      font-weight: 600;
    }
    input[type="number"] {
      width: 100%;
      padding: 0.4rem 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
      box-sizing: border-box;
    }
    .axis-desc {
      margin-top: 0.5rem;
      font-size: 0.78rem;
      color: #444;
      line-height: 1.4;
    }
    .btn {
      display: inline-block;
      padding: 0.6rem 1.4rem;
      border-radius: 999px;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 1rem;
      background: #1a3cff;
      color: #fff;
      margin-right: 0.5rem;
    }
    .btn-secondary {
      background: #e4e7ff;
      color: #1a3cff;
    }
    .results { margin-top: 2rem; }
    .badge {
      display: inline-block;
      padding: 0.15rem 0.6rem;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 600;
      background: #e7edff;
      color: #1a3cff;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      font-size: 0.9rem;
    }
    th, td {
      padding: 0.45rem 0.4rem;
      border-bottom: 1px solid #eee;
      text-align: right;
    }
    th:first-child, td:first-child { text-align: left; }
    tr.highlight { background: #f0f4ff; font-weight: 600; }
    .axis-summary {
      font-size: 0.85rem;
      margin-top: 0.5rem;
      color: #555;
    }
    .alert {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: #a00;
    }
    .footer-note {
      margin-top: 2rem;
      font-size: 0.75rem;
      color: #666;
      border-top: 1px solid #e1e1e1;
      padding-top: 0.75rem;
    }
    .method-note {
      margin-top: 1rem;
      padding: 0.6rem 0.8rem;
      border-left: 4px solid #1a3cff;
      background: #f5f7ff;
      font-size: 0.8rem;
      color: #444;
    }
    @media (max-width: 600px) {
      body { padding: 0.75rem; }
      .container { padding: 1rem 1.1rem 1.5rem; }
    }
  </style>
</head>

<body>
<div class="container">
  <h1>Simulador de alineamiento entre tu priorización temática y los planes de gobierno</h1>

  <p class="intro">
    Este simulador se basa en un análisis automatizado del texto de los planes de gobierno de las diez candidaturas que lideran la Encuesta de Opinión Pública ECP–CIEP-UCR del 3 de diciembre de 2025. A partir de ese corpus se identificaron cinco ejes temáticos transversales que agrupan la mayor parte de las propuestas programáticas: <strong>Desarrollo Económico Integral</strong>, <strong>Desarrollo Social Inclusivo</strong>, <strong>Gestión de Recursos Naturales</strong>, <strong>Reforma Institucional y Eficiencia Financiera</strong> y <strong>Seguridad y Justicia Integral</strong>. Estos ejes representan grandes áreas de política pública sobre las cuales las candidaturas estructuran sus planes y comunican sus prioridades.
  </p>

  <p class="intro">
    El propósito de este ejercicio es invitarte a reflexionar y priorizar, asignando un peso entre 0 y 100 a cada uno de estos ejes según la importancia que tienen en tu propia decisión de voto. Esa priorización es necesariamente personal y depende de la visión política, económica y social de cada persona, así como de cómo interpreta el contexto actual de Costa Rica y qué considera más urgente, estratégico o estructural para el país. Una vez definida tu distribución, esta se compara con el volumen relativo de texto que cada plan de gobierno dedica a esos mismos ejes, calculando la suma de diferencias absolutas en puntos porcentuales para mostrar con cuál candidatura existe una mayor aproximación en términos de énfasis temático.
  </p>

  <p class="intro">
    Para ilustrar cómo puede razonarse esta priorización —sin que constituya una referencia normativa—, comparto a continuación un ejemplo personal.
  </p>

  <!-- ✅ Ejemplo personal: ahora en párrafos separados por eje (sin sintetizar ni recortar) -->
  <p class="intro">
    En mi caso, asigné el mayor peso al Desarrollo Social Inclusivo (35%), al considerar que una sociedad educada, sana, con acceso equitativo a oportunidades y con cohesión social constituye la base sobre la cual se sostiene el desarrollo de largo plazo. El fortalecimiento del capital humano no solo reduce desigualdades estructurales, sino que impulsa la productividad, la movilidad social y la estabilidad democrática, creando condiciones más sólidas para el crecimiento sostenible.
  </p>

  <p class="intro">
    En segundo lugar prioricé el Desarrollo Económico Integral (26%), entendiendo que dinamizar la economía, atraer inversión, fomentar la innovación, desarrollar capacidades digitales y aumentar la productividad es indispensable para generar más y mejores empleos, ingresos sostenibles para las personas, las empresas y el Estado, y una estabilidad macroeconómica que respalde la ejecución de políticas públicas efectivas en áreas como educación, salud, seguridad e infraestructura.
  </p>

  <p class="intro">
    En tercer lugar asigné un peso relevante a la Gestión de Recursos Naturales (20%), considerando que para Costa Rica la sostenibilidad ambiental, hídrica y energética es estratégica: sostiene sectores productivos clave como el turismo y la agricultura, protege el bienestar comunitario, reduce riesgos futuros en salud y seguridad alimentaria, y fortalece el posicionamiento internacional del país.
  </p>

  <p class="intro">
    Posteriormente otorgué un peso moderado a Seguridad y Justicia Integral (11%), reconociendo la gravedad de la coyuntura actual, pero partiendo de la convicción de que sus soluciones estructurales dependen en gran medida de avances en educación, oportunidades económicas y cohesión social, más allá de respuestas de corto plazo que suelen ser similares entre planes.
  </p>

  <p class="intro">
    Finalmente asigné un menor peso a Reforma Institucional y Eficiencia Financiera (8%), no por falta de relevancia, sino considerando avances recientes como la reforma fiscal, la ley de empleo público y procesos de digitalización del Estado, y entendiendo que los desafíos pendientes en esta materia están estrechamente vinculados al crecimiento económico y la estabilidad macroeconómica.
  </p>

  <p class="intro">
    Este ejemplo no pretende ser replicado ni asumido como correcto: su objetivo es mostrar una forma posible de razonar, justificar prioridades y asignar pesos de manera coherente y contextualizada.
  </p>

  <p class="intro">
    En ese sentido, este ejercicio es direccional y práctico, no exhaustivo ni definitivo: aproxima la importancia que cada candidatura parece otorgar a los distintos temas a partir del espacio que les dedica en su plan, pero no evalúa la calidad, viabilidad o impacto potencial de las propuestas. El resultado busca servir como punto de partida para orientar el análisis, motivar una revisión más profunda de los planes de gobierno más cercanos a tus prioridades y complementar otros criterios fundamentales como el desempeño de las candidaturas en debates y entrevistas, sus cualidades de liderazgo y equipos cercanos, la evolución del contexto electoral y el diálogo informado con personas de confianza.
  </p>

  <h2>1. Asigna un peso a cada eje temático</h2>
  <p style="font-size:0.85rem; margin-top:0;">
    Los pesos deben sumar <strong>100</strong> entre todos los ejes. Usa los textos descriptivos para guiarte sobre
    qué abarca cada uno.
  </p>

  <form id="weightsForm">
    <div class="grid">
      <!-- ORDEN ALFABÉTICO por primera palabra: Desarrollo..., Desarrollo..., Gestión..., Reforma..., Seguridad... -->

      <!-- Desarrollo Económico Integral -->
      <div class="card">
        <label for="economico">Desarrollo Económico Integral</label>
        <input type="number" id="economico" min="0" max="100" step="1" value="0">
        <div class="axis-desc">
          Iniciativas que impulsan la modernización productiva y comercial mediante la integración de tecnología
          digital, innovación, movilidad, alianzas estratégicas y formación de capital humano, orientadas a fortalecer
          la competitividad nacional, la infraestructura de transporte y turismo, la ciberseguridad y la atracción de
          inversión extranjera en un entorno empresarial dinámico y regionalmente articulado.
        </div>
      </div>

      <!-- Desarrollo Social Inclusivo -->
      <div class="card">
        <label for="social">Desarrollo Social Inclusivo</label>
        <input type="number" id="social" min="0" max="100" step="1" value="0">
        <div class="axis-desc">
          Iniciativas que promueven el acceso equitativo y la mejora continua de la educación, salud, cultura y
          bienestar, priorizando la inclusión de grupos diversos y vulnerables mediante acciones transversales
          orientadas a reducir brechas sociales, fortalecer capacidades y garantizar oportunidades para todos los
          sectores de la población costarricense.
        </div>
      </div>

      <!-- Gestión de Recursos Naturales -->
      <div class="card">
        <label for="recursos">Gestión de Recursos Naturales</label>
        <input type="number" id="recursos" min="0" max="100" step="1" value="0">
        <div class="axis-desc">
          Iniciativas que promueven el manejo sostenible, responsable y tecnológicamente avanzado de los recursos
          naturales, energéticos e hídricos, integrando la producción agrícola, pesquera y urbana con la conservación
          ambiental, la adaptación climática y la gobernanza participativa para asegurar el bienestar comunitario y la
          biodiversidad en Costa Rica.
        </div>
      </div>

      <!-- Reforma Institucional y Eficiencia Financiera -->
      <div class="card">
        <label for="reforma">Reforma Institucional y Eficiencia Financiera</label>
        <input type="number" id="reforma" min="0" max="100" step="1" value="0">
        <div class="axis-desc">
          Iniciativas que buscan transformar y optimizar la gestión pública mediante reformas administrativas,
          financieras, legales y tecnológicas, orientadas a reducir duplicidades, fortalecer la rendición de cuentas,
          mejorar la equidad y eficiencia fiscal, y garantizar el acceso justo a servicios esenciales como vivienda y
          pensiones bajo un marco regulatorio actualizado y transparente.
        </div>
      </div>

      <!-- Seguridad y Justicia Integral -->
      <div class="card">
        <label for="seguridad">Seguridad y Justicia Integral</label>
        <input type="number" id="seguridad" min="0" max="100" step="1" value="0">
        <div class="axis-desc">
          Iniciativas que articulan acciones estatales para fortalecer la seguridad pública, la prevención y
          persecución del delito, la integridad institucional y la protección ciudadana mediante sistemas policiales,
          judiciales y de inteligencia, promoviendo la paz social y la dignidad en respuesta a fenómenos criminales,
          violencia, corrupción, narcotráfico y desafíos asociados a la inseguridad en Costa Rica.
        </div>
      </div>
    </div>

    <div class="axis-summary" id="sumInfo"></div>
    <div class="alert" id="alert"></div>

    <button type="submit" class="btn">Calcular alineamiento</button>
    <button type="button" class="btn btn-secondary" id="resetBtn">Reiniciar valores</button>
  </form>

  <div class="results" id="results" style="display:none;">
    <h2>2. Resultados de alineamiento</h2>
    <p id="bestMatchText" style="font-size:0.95rem;"></p>
    <p id="bestMatchProfile" style="font-size:0.85rem;color:#444;"></p>

    <div class="method-note">
      Este resultado muestra únicamente el nivel de alineamiento entre tu distribución de importancia por eje temático
      y la distribución de contenidos de los planes. Se calcula mediante la suma de diferencias absolutas en puntos
      porcentuales y no constituye una evaluación integral de las candidaturas.
    </div>

    <h3>Detalle por candidatura</h3>
    <table id="resultsTable">
      <thead>
        <tr>
          <th>Candidatura</th>
          <th>Diferencia total (suma absoluta)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3 style="margin-top:1.75rem;">Comparación gráfica de tu perfil vs el plan mejor alineado</h3>
    <p style="font-size:0.8rem;color:#555;">
      Barras en porcentaje de peso relativo por eje temático (tú vs plan mejor alineado).
    </p>
    <canvas id="comparisonChart" width="400" height="220"></canvas>

    <p class="axis-summary" id="axisBreakdown"></p>

    <div style="margin-top:2rem;border-top:1px solid #e1e1e1;padding-top:1.2rem;">
      <h3>Antes de tomar tu decisión de voto, te recomiendo también:</h3>
      <ol style="font-size:0.9rem;line-height:1.5;color:#333;">
        <li>
          Conocer más sobre la viabilidad política, fiscal y de ejecución de las propuestas,
          más allá de lo que dice el documento del plan de gobierno.
        </li>
        <li>
          Observar el desempeño de la candidatura en debates, entrevistas y momentos de presión
          para evaluar claridad, criterio, coherencia y capacidad de liderazgo.
        </li>
        <li>
          Conocer mejor el perfil del candidato y sus cualidades de liderazgo, el equipo cercano
          y posibles figuras de gobierno; las decisiones de país no dependen solo de una persona.
        </li>
        <li>
          Analizar cómo evoluciona el contexto electoral, la discusión pública y los hechos nuevos
          que puedan surgir durante la campaña.
        </li>
        <li>
          Conversar de manera abierta e informada con familiares, amigos y personas de confianza
          para contrastar perspectivas.
        </li>
      </ol>
    </div>
  </div>

  <div class="footer-note">
    Nota metodológica: Para estimar el peso temático de cada eje en los planes de gobierno, el contenido se dividió en
    segmentos de texto de aproximadamente 2.000 caracteres, utilizando un solapamiento de 200 caracteres entre
    segmentos consecutivos. Sobre estos segmentos —tratados como documentos analíticos— se aplicó un modelo de tópicos
    (Parallel LDA) y se seleccionó el número óptimo de tópicos (k) mediante una evaluación comparativa. Posteriormente,
    los tópicos se agruparon e interpretaron en los cinco ejes utilizados en este simulador, y se nombraron y descritos
    con apoyo de ChatGPT-4.1 a partir de los términos y pesos estimados por el modelo.
  </div>
</div>

<script>
  // Orden de ejes en los datos (coincide con el orden alfabético mostrado):
  // 1) Desarrollo Económico Integral
  // 2) Desarrollo Social Inclusivo
  // 3) Gestión de Recursos Naturales
  // 4) Reforma Institucional y Eficiencia Financiera
  // 5) Seguridad y Justicia Integral
  const axisNames = [
    "Desarrollo Económico Integral",
    "Desarrollo Social Inclusivo",
    "Gestión de Recursos Naturales",
    "Reforma Institucional y Eficiencia Financiera",
    "Seguridad y Justicia Integral"
  ];

  // Distribución temática de cada candidatura por eje (%), en el mismo orden que axisNames
  const candidateAxes = {
    "Álvaro Ramos":          [29.5, 33.5, 19.2, 3.8, 13.9],
    "Ariel Robles":          [15.9, 42.6, 13.6, 7.5, 20.4],
    "Claudia Dobles":        [24.4, 34.3, 24.2, 6.9, 10.2],
    "Eli Feinzaig":          [34.2, 21.7, 16.8, 14.2, 13.1],
    "Fabricio Alvarado":     [20.8, 28.6, 12.0, 4.5, 34.1],
    "José Aguilar Berrocal": [33.9, 27.0, 10.4, 5.6, 23.2],
    "Juan Carlos Hidalgo":   [32.5, 29.2, 16.1, 7.9, 14.3],
    "Laura Fernández":       [12.2, 16.2, 7.0, 56.6, 8.1],
    "Luz Mary Alpízar":      [22.1, 43.4, 13.5, 8.3, 12.7],
    "Natalia Díaz":          [30.0, 29.6, 16.0, 8.9, 15.4]
  };

  const candidateProfiles = {
    "Álvaro Ramos": "Perfil orientado a desarrollo económico y social con peso relevante en gestión de recursos naturales.",
    "Ariel Robles": "Perfil con fuerte énfasis en desarrollo social inclusivo y justicia integral.",
    "Claudia Dobles": "Perfil relativamente equilibrado entre desarrollo social, económico y gestión de recursos naturales.",
    "Eli Feinzaig": "Perfil centrado en desarrollo económico integral con enfoque de mercado.",
    "Fabricio Alvarado": "Perfil con fuerte prioridad en seguridad y justicia integral.",
    "José Aguilar Berrocal": "Perfil que combina énfasis en seguridad, economía y desarrollo social.",
    "Juan Carlos Hidalgo": "Perfil liberal con alto peso en economía y desarrollo social.",
    "Laura Fernández": "Perfil fuertemente concentrado en reforma institucional y eficiencia del Estado.",
    "Luz Mary Alpízar": "Perfil con énfasis marcado en desarrollo social inclusivo.",
    "Natalia Díaz": "Perfil mixto con peso relevante en economía, recursos naturales y desarrollo social."
  };

  const form = document.getElementById("weightsForm");
  const resetBtn = document.getElementById("resetBtn");
  const sumInfo = document.getElementById("sumInfo");
  const alertBox = document.getElementById("alert");
  const resultsDiv = document.getElementById("results");
  const bestMatchText = document.getElementById("bestMatchText");
  const bestMatchProfile = document.getElementById("bestMatchProfile");
  const resultsTableBody = document.querySelector("#resultsTable tbody");
  const axisBreakdown = document.getElementById("axisBreakdown");
  const chartCanvas = document.getElementById("comparisonChart");
  let comparisonChart = null;

  function formatNumber(x, decimals=1) {
    return x.toFixed(decimals).replace(".", ",");
  }

  function getAxisWeights() {
    // Debe seguir el mismo orden de axisNames
    const ids = ["economico","social","recursos","reforma","seguridad"];
    const values = [];
    let sum = 0;

    ids.forEach(id => {
      const v = parseFloat(document.getElementById(id).value || "0");
      const val = isNaN(v) ? 0 : v;
      values.push(val);
      sum += val;
    });

    return { values, sum };
  }

  function updateSumInfo() {
    const { values, sum } = getAxisWeights();
    if (sum === 0) {
      sumInfo.textContent = "Aún no has ingresado pesos. Cuando lo hagas, se mostrará un resumen de tu distribución.";
      alertBox.textContent = "";
      return;
    }
    const normalized = values.map(v => v * 100 / sum);
    sumInfo.textContent =
      `Suma total ingresada: ${formatNumber(sum,1)}. ` +
      `Distribución relativa: ${axisNames.map((n,i) => `${n} ${formatNumber(normalized[i])}%`).join(", ")}.`;
    alertBox.textContent = "";
  }

  form.addEventListener("input", updateSumInfo);
  updateSumInfo();

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    const { values, sum } = getAxisWeights();

    const tolerance = 0.5;
    if (sum === 0) {
      alertBox.textContent = "Por favor ingresa algún peso distinto de cero en los ejes temáticos.";
      resultsDiv.style.display = "none";
      return;
    }
    if (Math.abs(sum - 100) > tolerance) {
      alertBox.textContent =
        `La suma de los pesos debe ser 100. Actualmente suma ${formatNumber(sum,1)}. ` +
        `Ajusta los valores antes de continuar.`;
      resultsDiv.style.display = "none";
      return;
    }

    const normalized = values.map(v => v * 100 / sum);

    const results = [];
    for (const [name, axes] of Object.entries(candidateAxes)) {
      let absSum = 0;
      for (let i = 0; i < axes.length; i++) {
        absSum += Math.abs(normalized[i] - axes[i]);
      }
      results.push({ name, absSum, axes });
    }
    results.sort((a,b) => a.absSum - b.absSum);

    const best = results[0];

    bestMatchText.innerHTML =
      `<span class="badge">Mejor alineamiento</span> ` +
      `El plan de gobierno que más se aproxima a tu distribución de ejes temáticos es el de <strong>${best.name}</strong> ` +
      `con una diferencia total de <strong>${formatNumber(best.absSum,1)} puntos porcentuales</strong>.`;

    bestMatchProfile.textContent =
      candidateProfiles[best.name] || "Descripción pendiente de completar para esta candidatura.";

    resultsTableBody.innerHTML = "";
    results.forEach((r, idx) => {
      const tr = document.createElement("tr");
      if (idx === 0) tr.classList.add("highlight");
      tr.innerHTML = `<td>${r.name}</td><td>${formatNumber(r.absSum,1)} pp</td>`;
      resultsTableBody.appendChild(tr);
    });

    axisBreakdown.textContent =
      `Tus pesos normalizados para el cálculo fueron: ` +
      axisNames.map((n,i) => `${n} ${formatNumber(normalized[i])}%`).join(", ") + ".";

    if (comparisonChart) comparisonChart.destroy();
    comparisonChart = new Chart(chartCanvas, {
      type: 'bar',
      data: {
        labels: axisNames,
        datasets: [
          {
            label: 'Tus prioridades',
            data: normalized,
            backgroundColor: 'rgba(26, 60, 255, 0.6)'
          },
          {
            label: `Plan de ${best.name}`,
            data: best.axes,
            backgroundColor: 'rgba(120, 120, 120, 0.6)'
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            ticks: { callback: value => value + '%' }
          }
        },
        plugins: {
          legend: { position: 'bottom' },
          tooltip: {
            callbacks: {
              label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y.toFixed(1)}%`
            }
          }
        }
      }
    });

    resultsDiv.style.display = "block";
    alertBox.textContent = "";
  });

  resetBtn.addEventListener("click", () => {
    ["economico","social","recursos","reforma","seguridad"].forEach(id => {
      document.getElementById(id).value = 0;
    });
    if (comparisonChart) {
      comparisonChart.destroy();
      comparisonChart = null;
    }
    resultsDiv.style.display = "none";
    alertBox.textContent = "";
    updateSumInfo();
  });
</script>
</body>
</html>
